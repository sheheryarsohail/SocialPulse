import{o as l,k as v,w as t,b as e,a as s,u as g,l as $,_ as M,c as f,r as p,d as _,f as m,n as T,O as w,h as V,F as k,e as j,Z as D,P as B,m as y,p as N,t as C,q as L}from"./app.172b2de0.js";import{u as F}from"./useNotifications.fe41dfa4.js";import{_ as P}from"./PageHeader.5206c81b.js";import{_ as E}from"./Panel.52ba92d7.js";import{_ as O,a as R,b as H,T as q,c as z}from"./Trash.0f8df249.js";import{_ as U}from"./Account.d771f234.js";import{T as X,F as Y,M as Z}from"./ProviderIcon.58df7758.js";import{_ as G}from"./Input.c7303889.js";import{_ as I}from"./PrimaryButton.a873fded.js";import{_ as J}from"./HorizontalGroup.13d04729.js";import{E as K}from"./EllipsisVertical.ad50047d.js";import{_ as Q}from"./Alert.78c7be06.js";import"./ExclamationCircle.962a476a.js";const W={class:"flex mr-4"},ee=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"X"),e("span",null,"Connect a new X profile")],-1),se={__name:"AddTwitterAccount",setup(d){return(n,a)=>(l(),v(g($),{href:n.route("mixpost.accounts.add",{provider:"twitter"}),method:"post",as:"button",type:"button",class:"w-full flex items-center px-lg py-4 hover:bg-twitter hover:bg-opacity-20 ease-in-out duration-200"},{default:t(()=>[e("span",W,[s(X,{class:"text-twitter"})]),ee]),_:1},8,["href"]))}},te={class:"flex mr-4"},oe=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"Facebook Page"),e("span",null,"Connect a new Facebook page")],-1),ne={__name:"AddFacebookPage",setup(d){return(n,a)=>(l(),v(g($),{href:n.route("mixpost.accounts.add",{provider:"facebook_page"}),method:"post",as:"button",type:"button",class:"w-full flex items-center px-lg py-4 hover:bg-facebook hover:bg-opacity-20 ease-in-out duration-200"},{default:t(()=>[e("span",te,[s(Y,{class:"text-facebook"})]),oe]),_:1},8,["href"]))}},ae={},re={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},le=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"},null,-1),ce=[le];function ie(d,n){return l(),f("svg",re,ce)}const ue=M(ae,[["render",ie]]),de={class:"flex mr-md"},_e=e("span",{class:"flex flex-col items-start"},[e("span",{class:"font-semibold"},"Mastodon"),e("span",null,"Connect a new Mastodon profile")],-1),fe={key:0,class:"px-lg py-md"},pe=e("span",{class:"mr-xs"},"Next",-1),me={__name:"AddMastodonAccount",setup(d){const{notify:n}=F(),a=p(!1),o=p(""),u=p(!1),x=()=>new Promise((c,i)=>{axios.post(route("mixpost.services.createMastodonApp"),{server:o.value}).then(()=>{c()}).catch(function(r){i(r)})}),b=()=>{a.value=!0,w.post(route("mixpost.accounts.add",{provider:"mastodon"}),{server:o.value},{onSuccess(){a.value=!1}})},h=async()=>{a.value=!0,await x().then(()=>{b()}).catch(c=>{if(c.response.status!==422){n("error",c.response.data.message);return}n("error",c.response.data.errors)}).finally(()=>{a.value=!1})};return(c,i)=>(l(),f("div",{class:T({"bg-mastodon bg-opacity-20":u.value})},[e("div",{role:"button",onClick:i[0]||(i[0]=r=>u.value=!u.value),type:"button",class:"w-full flex items-center px-lg py-md hover:bg-mastodon hover:bg-opacity-20 ease-in-out duration-200"},[e("span",de,[s(Z,{class:"text-mastodon"})]),_e]),u.value?(l(),f("div",fe,[s(J,null,{title:t(()=>[_("Enter your Mastodon server")]),default:t(()=>[s(G,{type:"text",modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=r=>o.value=r),placeholder:"example.server"},null,8,["modelValue"])]),_:1}),s(I,{onClick:h,disabled:!o.value||a.value,isLoading:a.value,class:"mt-xs md:mt-0"},{default:t(()=>[pe,e("span",null,[s(ue,{class:"!w-5 !h-5"})])]),_:1},8,["disabled","isLoading"])])):m("",!0)],2))}},ve={},he={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},ge=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1),xe=[ge];function be(d,n){return l(),f("svg",he,xe)}const we=M(ve,[["render",be]]),$e={key:0,class:"mb-md"},ke={key:0},ye={key:1},Ce=e("p",{class:"mt-xs italic"},"Click on the button below to configure the third-party services.",-1),Ae={__name:"AlertUnconfiguredService",props:{isConfigured:{type:Object,required:!0}},setup(d){const n=d,a=V(()=>Object.keys(n.isConfigured).some(o=>!["tenor","unsplash"].includes(o)&&n.isConfigured[o]!==!0));return(o,u)=>a.value?(l(),f("div",$e,[s(Q,{variant:"warning",closeable:!1,class:"mb-md"},{default:t(()=>[d.isConfigured.facebook?m("",!0):(l(),f("p",ke,"You have not configured Facebook service.")),d.isConfigured.twitter?m("",!0):(l(),f("p",ye,"You have not configured Twitter service.")),Ce]),_:1}),s(g($),{href:o.route("mixpost.services.index"),class:"inline-block"},{default:t(()=>[s(I,null,{default:t(()=>[_("Configure services")]),_:1})]),_:1},8,["href"])])):m("",!0)}},Me={class:"w-full mx-auto row-py"},Fe={class:"mt-lg row-px w-full"},Ie={class:"w-full grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 2xl:grid-cols-5 gap-6"},Se={class:"block p-lg"},Te={class:"flex flex-col justify-center items-center"},Ve=e("span",{class:"mt-xs text-lg"},"Add account",-1),je={class:"absolute top-0 right-0 mt-sm mr-sm"},De={class:"flex flex-col justify-center"},Be={class:"mt-sm font-semibold text-center break-words"},Ne={class:"mt-1 text-center text-stone-800"},Le={class:"flex flex-col"},A="Social Accounts",Ke={__name:"Accounts",setup(d){const{notify:n}=F(),a=p(!1),o=p(null),u=p(!1),x=c=>{w.put(route("mixpost.accounts.update",{account:c}),{},{preserveScroll:!0,onSuccess(i){i.props.flash.error||n("success","The account has been refreshed")}})},b=()=>{w.delete(route("mixpost.accounts.delete",{account:o.value}),{preserveScroll:!0,onStart(){u.value=!0},onSuccess(){o.value=null,n("success","Account deleted")},onFinish(){u.value=!1}})},h=()=>{u.value||(o.value=null)};return(c,i)=>(l(),f(k,null,[s(g(D),{title:A}),e("div",Me,[s(P,{title:A},{description:t(()=>[_(" Connect a social account you'd like to manage. ")]),_:1}),e("div",Fe,[s(Ae,{isConfigured:c.$page.props.is_configured_service},null,8,["isConfigured"]),e("div",Ie,[e("button",{onClick:i[0]||(i[0]=r=>a.value=!0),class:"border border-indigo-800 rounded-lg hover:border-indigo-500 hover:text-indigo-500 transition-colors ease-in-out duration-200"},[e("span",Se,[e("span",Te,[s(B,{class:"w-7 h-7"}),Ve])])]),(l(!0),f(k,null,j(c.$page.props.accounts,r=>(l(),v(E,{key:r.id,class:"relative"},{default:t(()=>[e("div",je,[s(N,{"width-classes":"w-32"},{trigger:t(()=>[s(H,null,{default:t(()=>[s(K)]),_:1})]),content:t(()=>[s(y,{onClick:S=>x(r.id),as:"button"},{default:t(()=>[s(we,{class:"!w-5 !h-5 mr-1"}),_(" Refresh ")]),_:2},1032,["onClick"]),s(y,{onClick:S=>o.value=r.id,as:"button"},{default:t(()=>[s(q,{class:"!w-5 !h-5 mr-1 text-red-500"}),_(" Delete ")]),_:2},1032,["onClick"])]),_:2},1024)]),e("div",De,[s(U,{size:"lg","img-url":r.image,provider:r.provider,active:!0},null,8,["img-url","provider"]),e("div",Be,C(r.name),1),e("div",Ne,"Added: "+C(r.created_at),1)])]),_:2},1024))),128))])])]),s(O,{show:o.value!==null,onClose:h,variant:"danger"},{header:t(()=>[_(" Delete account ")]),body:t(()=>[_(" Are you sure you want to delete this account? ")]),footer:t(()=>[s(L,{onClick:h,disabled:u.value,class:"mr-xs"},{default:t(()=>[_("Cancel ")]),_:1},8,["disabled"]),s(z,{onClick:b,"is-loading":u.value,disabled:u.value},{default:t(()=>[_("Delete ")]),_:1},8,["is-loading","disabled"])]),_:1},8,["show"]),s(R,{show:a.value,closeable:!0,onClose:i[1]||(i[1]=r=>a.value=!1)},{default:t(()=>[e("div",Le,[c.$page.props.is_configured_service.facebook?(l(),v(ne,{key:0})):m("",!0),s(me),c.$page.props.is_configured_service.twitter?(l(),v(se,{key:1})):m("",!0)])]),_:1},8,["show"])],64))}};export{Ke as default};
